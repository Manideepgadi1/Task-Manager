# Task Manager - Access via http://vsfintech.in/taskmanager
# Add this to your main vsfintech.in nginx config:

# Task Manager Frontend
location /taskmanager {
    alias /var/www/task-manager/frontend/dist;
    try_files $uri $uri/ /taskmanager/index.html;
    expires -1;
    add_header Cache-Control "no-cache, no-store, must-revalidate";
}

# Task Manager Backend API
location /taskmanager/api/ {
    rewrite ^/taskmanager/api/(.*)$ /$1 break;
    proxy_pass http://127.0.0.1:8005;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection 'upgrade';
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;
    proxy_cache_bypass $http_upgrade;
}

# Task Manager WebSocket
location /taskmanager/socket.io/ {
    rewrite ^/taskmanager/socket.io/(.*)$ /socket.io/$1 break;
    proxy_pass http://127.0.0.1:8005;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection "upgrade";
    proxy_set_header Host $host;
    proxy_cache_bypass $http_upgrade;
}
